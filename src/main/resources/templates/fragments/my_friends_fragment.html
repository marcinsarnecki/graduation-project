<div data-th-fragment="content">
  <div class="container mt-4">
    <div class="row justify-content-center">
      <div class="col-md-6 col-lg-4">
        <th:block th:replace="~{fragments/alert_message_fragment::alertMessages(${errorMessages}, ${successMessage})}"></th:block>
        <div class="card">
          <div class="card-body">
            <h5 class="card-title text-center">My Friends</h5>
            <ul class="list-group list-group-flush" th:unless="${#lists.isEmpty(friendsPage)}">
              <li class="list-group-item d-flex justify-content-between align-items-center" th:each="friend : ${friendsPage}">
                <span th:text="${friend.username}"></span>
                <form th:action="@{/friends/delete-friend}" method="post" class="d-inline">
                  <input type="hidden" name="friendUsername" th:value="${friend.username}" />
                  <button type="submit" class="btn btn-outline-danger btn-sm">Unfriend</button>
                </form>
              </li>
            </ul>
            <div th:if="${#lists.isEmpty(friendsPage)}">
              <p>No friends found.</p>
            </div>
            <nav aria-label="Page navigation" class="mt-4">
              <ul class="pagination justify-content-center">
                <li th:class="|page-item ${friendsPage.hasPrevious() ? '' : 'disabled'}|">
                  <a class="page-link" th:href="@{'/friends/my-friends?page=' + (${friendsPage.number - 1})}" th:if="${friendsPage.hasPrevious()}">Previous</a>
                </li>
                <li th:each="pageNum : ${#numbers.sequence(0, friendsPage.totalPages - 1)}" th:class="|page-item ${pageNum == friendsPage.number ? 'active' : ''}|">
                  <a class="page-link" th:href="@{'/friends/my-friends?page=' + ${pageNum}}" th:text="${pageNum + 1}"></a>
                </li>
                <li th:class="|page-item ${friendsPage.hasNext() ? '' : 'disabled'}|">
                  <a class="page-link" th:href="@{'/friends/my-friends?page=' + (${friendsPage.number + 1})}" th:if="${friendsPage.hasNext()}">Next</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
